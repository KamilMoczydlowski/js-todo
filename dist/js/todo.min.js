"use strict";var textToEdit,addItemBtn=document.querySelector(".add-item-btn"),textInput=document.querySelector(".text-input"),accordion=document.querySelector(".accordion"),listItemTemp=document.querySelector(".list-item-temp"),alertInfo=document.querySelector(".alert-info"),manageCategoryBtn=document.querySelector(".manage-category-btn"),editItemPopup=document.querySelector(".edit-task-popup"),editItemInput=document.querySelector(".edit-input"),editItemErrMsg=document.querySelector(".edit-error-msg"),editItemBtnAccept=document.querySelector(".edit-button-accept"),editItemBtnCancel=document.querySelector(".edit-button-cancel"),manageCategoryPopup=document.querySelector(".manage-category-popup"),manageCategoryTemplate=document.querySelector(".categories-list-item-template"),manageCategoryList=document.querySelector(".categories-list"),manageCategoryInfo=document.querySelector(".manage-category-info"),createCategoryBtn=document.querySelector(".add-category-btn"),manageCategoryCloseBtn=document.querySelector(".close-category-btn"),categorySelect=document.querySelector(".category-select"),editCategoryPopup=document.querySelector(".edit-category-popup"),editCategoryInput=document.querySelector(".edit-category-input"),editCategoryErrMsg=document.querySelector(".edit-category-error-msg"),editCategoryAcceptBtn=document.querySelector(".edit-category-accept"),editCategoryCancelBtn=document.querySelector(".edit-category-cancel"),createCategoryPopup=document.querySelector(".create-category-popup"),createCategoryErrMsg=document.querySelector(".create-category-error-msg"),createCategoryBtnAccept=document.querySelector(".create-category-accept"),createCategoryBtnCancel=document.querySelector(".create-category-cancel"),createCategoryInput=document.querySelector(".create-category-input"),itemIdNumber=0,addItem=function(){var e,t,o,r,a,n,c,i=listItemTemp.content.cloneNode(!0);""!==textInput.value?(e=(c=categorySelect.value)[0].toUpperCase()+c.slice(1),n=accordion.querySelector("#".concat(c)),itemIdNumber++,alertInfo.textContent="",n?n.id==c&&(n=n.querySelector(".acc-list"),r=(a=i.querySelector(".list-item")).querySelector(".text-content"),o=(t=n.previousElementSibling).querySelector(".category-todo-number").textContent,o++,t.querySelector(".category-todo-number").textContent=o,a.setAttribute("id","item-".concat(itemIdNumber)),r.textContent=textInput.value,textInput.value="",addBtnsAndListeners(a),n.appendChild(a),n.classList.remove("hide"),n.previousElementSibling.querySelector(".category-arrow").classList.remove("rotate")):((t=i.querySelector(".acc-box")).setAttribute("id","".concat(c)),o=t.querySelector(".category-todo-title-btn"),r=t.querySelector(".category-todo-text"),a=t.querySelector(".category-todo-number"),c=(n=i.querySelector(".list-item")).querySelector(".text-content"),o.addEventListener("click",toggleAccordion),r.textContent=e,a.textContent="1",n.setAttribute("id","item-".concat(itemIdNumber)),c.textContent=textInput.value,textInput.value="",addBtnsAndListeners(n),accordion.appendChild(t))):alertInfo.textContent="Write something to do!"},addBtnsAndListeners=function(e){var t=e.querySelector(".button-check"),o=e.querySelector(".button-edit"),e=e.querySelector(".button-delete");t.addEventListener("click",checkItem),o.addEventListener("click",editItem),e.addEventListener("click",deleteItem),e.addEventListener("click",checkIfAnyItemLeft)},enterKeyAddItem=function(){13===event.keyCode&&addItem()},checkItem=function(e){var t=e.target.closest(".button-check"),o=t.nextElementSibling,t=t.closest(".list-item"),e=e.target.closest(".acc-box"),r=e.querySelector(".category-todo-number").textContent;t.classList.contains("completed")?(o.disabled=!1,t.classList.remove("completed"),r++):(o.disabled=!0,t.classList.add("completed"),r--),e.querySelector(".category-todo-number").textContent=r},editItem=function(e){e=e.target.closest(".button-edit").closest(".list-item");textToEdit=e.querySelector(".text-content"),editItemPopup.closest(".popup").classList.add("display-block"),editItemInput.value=textToEdit.textContent},deleteItem=function(e){var t=e.target.closest(".acc-box"),e=e.target.closest(".button-delete"),o=t.querySelector(".category-todo-number").textContent;e.closest(".list-item").classList.contains("completed")?(e.closest(".list-item").remove(),editItemInput.value=""):(e.closest(".list-item").remove(),editItemInput.value="",o--,t.querySelector(".category-todo-number").textContent=o),0===t.querySelectorAll(".list-item").length&&t.remove()},acceptEditedText=function(){textToEdit.textContent=editItemInput.value,editItemPopup.closest(".popup").classList.remove("display-block"),textToEdit.textContent=editItemInput.value,editItemErrMsg.textContent="",editItemInput.style.border="none"},enterKeyEditItem=function(){13===event.keyCode&&acceptEditedText()},checkEditItemInput=function(){textToEdit.textContent===editItemInput.value?(editItemInput.style.border="2px solid red",editItemErrMsg.textContent="Please, change something!"):""===editItemInput.value?(editItemInput.style.border="2px solid red",editItemErrMsg.textContent="Please, write something!"):acceptEditedText()},cancelEditedText=function(){editItemPopup.closest(".popup").classList.remove("display-block"),editItemInput.value="",editItemErrMsg.textContent="",editItemInput.style.border="none"},showMeManageCategoryPopup=function(){document.querySelectorAll(".category-option").forEach(function(e){createLi(e)}),manageCategoryPopup.closest(".popup").classList.add("display-block")},createLi=function(e){var t=manageCategoryTemplate.content.cloneNode(!0).querySelector(".categories-list-item"),o=t.querySelector(".categories-list-item-text"),e=e.textContent,r=t.querySelector(".category-edit-button"),a=t.querySelector(".category-delete-button");r.addEventListener("click",editCategory),a.addEventListener("click",deleteCategory),o.textContent=e,manageCategoryList.appendChild(t)},editCategory=function(e){var e=e.target.closest(".category-edit-button").closest(".categories-list-item"),e=(textToEdit=e.querySelector(".categories-list-item-text")).textContent.toLowerCase(),t=document.querySelectorAll(".category-todo-text"),o=[];t.forEach(function(e){o.push(e.textContent.toLowerCase())}),o.includes(e)?(manageCategoryInfo.textContent="You are using this one!",manageCategoryInfo.classList.add("display-block")):(editCategoryInput.value=textToEdit.textContent,editCategoryPopup.closest(".popup").classList.add("display-block"),manageCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryInfo.classList.remove("display-block"))},checkEditCategoryInput=function(){var e=editCategoryInput.value,t=e.toLowerCase(),o=document.querySelectorAll(".categories-list-item-text"),r=[];o.forEach(function(e){r.push(e.textContent.toLowerCase())}),""===e?editCategoryErrMsg.textContent="Please, write something!":r.includes(t)?editCategoryErrMsg.textContent="Please, write new category!":acceptEditCategoryInput()},enterKeyEditCategory=function(){13===event.keyCode&&checkEditCategoryInput()},acceptEditCategoryInput=function(){var e=textToEdit.textContent.toLowerCase(),e=document.querySelector(".category-option[value = ".concat(e,"]"));e.value=editCategoryInput.value.toLowerCase(),e.textContent=editCategoryInput.value.charAt(0).toUpperCase()+editCategoryInput.value.slice(1),textToEdit.textContent=editCategoryInput.value.charAt(0).toUpperCase()+editCategoryInput.value.slice(1),editCategoryInput.value="",editCategoryErrMsg.textContent="",editCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryPopup.closest(".popup").classList.add("display-block")},closeEditCategoryPopup=function(){editCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryPopup.closest(".popup").classList.add("display-block"),editCategoryInput.value="",editCategoryErrMsg.textContent=""},deleteCategory=function(e){var t=e.target.closest(".category-delete-button").closest(".categories-list-item"),o=t.querySelector(".categories-list-item-text").textContent.toLowerCase(),e=document.querySelectorAll(".category-todo-text"),r=document.querySelectorAll(".category-option"),a=[];0<e.length?(e.forEach(function(e){e=e.textContent.toLowerCase();a.push(e)}),a.includes(o)?(manageCategoryInfo.textContent="You are using this category!",manageCategoryInfo.classList.add("display-block")):r.forEach(function(e){1<r.length?e.value===o&&(t.remove(),e.remove(),manageCategoryInfo.classList.remove("display-block")):(manageCategoryInfo.textContent="You need at least one category!",manageCategoryInfo.classList.add("display-block"))})):r.forEach(function(e){1<r.length?e.value===o&&(t.remove(),e.remove(),manageCategoryInfo.classList.remove("display-block")):(manageCategoryInfo.textContent="You need at least one category!",manageCategoryInfo.classList.add("display-block"))})},closeCategoryPopup=function(){document.querySelectorAll(".categories-list-item")&&document.querySelectorAll(".categories-list-item").forEach(function(e){e.remove()}),manageCategoryPopup.closest(".popup").classList.remove("display-block"),manageCategoryInfo.classList.remove("display-block")},showMecreateCategoryPopup=function(){createCategoryPopup.closest(".popup").classList.add("display-block"),manageCategoryInfo.classList.remove("display-block"),closeCategoryPopup()},acceptNewCategory=function(){var e=document.createElement("option");e.value=createCategoryInput.value.toLowerCase(),e.textContent=createCategoryInput.value.charAt(0).toUpperCase()+createCategoryInput.value.slice(1),e.classList.add("category-option"),categorySelect.append(e),createCategoryPopup.closest(".popup").classList.remove("display-block"),createCategoryInput.value="",createCategoryErrMsg.textContent=""},checkCategoryInput=function(){var e=createCategoryInput.value.toLowerCase(),t=document.querySelectorAll(".category-option"),o=[];t.forEach(function(e){o.push(e.value)}),""===createCategoryInput.value?createCategoryErrMsg.textContent="Please, write something!":o.includes(e)?createCategoryErrMsg.textContent="You already have this one!":(acceptNewCategory(),showMeManageCategoryPopup())},enterKeyAddCategory=function(){13===event.keyCode&&checkCategoryInput()},cancelNewCategory=function(){createCategoryPopup.closest(".popup").classList.remove("display-block"),createCategoryInput.value="",createCategoryErrMsg.textContent="",showMeManageCategoryPopup()},checkIfAnyItemLeft=function(){accordion.querySelector(".acc-box")?alertInfo.textContent="":alertInfo.textContent="For now there is nothing to do."},toggleAccordion=function(e){var e=e.target.closest(".category-todo-title-btn"),t=e.querySelector(".category-arrow");e.nextElementSibling.classList.toggle("hide"),t.classList.toggle("rotate")};addItemBtn.addEventListener("click",addItem),textInput.addEventListener("keyup",enterKeyAddItem),editItemBtnAccept.addEventListener("click",checkEditItemInput),editItemInput.addEventListener("keyup",enterKeyEditItem),editItemBtnCancel.addEventListener("click",cancelEditedText),manageCategoryBtn.addEventListener("click",showMeManageCategoryPopup),manageCategoryCloseBtn.addEventListener("click",closeCategoryPopup),editCategoryInput.addEventListener("keyup",enterKeyEditCategory),editCategoryAcceptBtn.addEventListener("click",checkEditCategoryInput),editCategoryCancelBtn.addEventListener("click",closeEditCategoryPopup),createCategoryBtn.addEventListener("click",showMecreateCategoryPopup),createCategoryBtnAccept.addEventListener("click",checkCategoryInput),createCategoryInput.addEventListener("keyup",enterKeyAddCategory),createCategoryBtnCancel.addEventListener("click",cancelNewCategory);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvZG8uanMiXSwibmFtZXMiOlsidGV4dFRvRWRpdCIsImFkZEl0ZW1CdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0SW5wdXQiLCJhY2NvcmRpb24iLCJsaXN0SXRlbVRlbXAiLCJtYW5hZ2VDYXRlZ29yeUJ0biIsImVkaXRJdGVtUG9wdXAiLCJlZGl0SXRlbUlucHV0IiwiZWRpdEl0ZW1FcnJNc2ciLCJlZGl0SXRlbUJ0bkFjY2VwdCIsIm1hbmFnZUNhdGVnb3J5UG9wdXAiLCJtYW5hZ2VDYXRlZ29yeVRlbXBsYXRlIiwiY3JlYXRlQ2F0ZWdvcnlCdG4iLCJtYW5hZ2VDYXRlZ29yeUNsb3NlQnRuIiwiY2F0ZWdvcnlTZWxlY3QiLCJlZGl0Q2F0ZWdvcnlQb3B1cCIsImVkaXRDYXRlZ29yeUVyck1zZyIsImVkaXRDYXRlZ29yeUNhbmNlbEJ0biIsImNyZWF0ZUNhdGVnb3J5UG9wdXAiLCJjcmVhdGVDYXRlZ29yeUVyck1zZyIsImNyZWF0ZUNhdGVnb3J5QnRuQWNjZXB0IiwiY3JlYXRlQ2F0ZWdvcnlCdG5DYW5jZWwiLCJpdGVtSWROdW1iZXIiLCJsaXN0SXRlbSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ2YWx1ZSIsImFkZEl0ZW0iLCJhY2NCdG4iLCJhY2NCb3giLCJhY2NvcmRpb25CdXR0b24iLCJ0aXRsZSIsIm51bWJlciIsImFkZEJ0bnNBbmRMaXN0ZW5lcnMiLCJidG5DaGVja0l0ZW0iLCJ0ZXh0Q29udGVudCIsIml0ZW0iLCJhY2NOdW1iZXIiLCJzZXRBdHRyaWJ1dGUiLCJjYXRlZ29yeVZhbHVlIiwiYWxlcnRJbmZvIiwiYWNjTGlzdCIsInJlbW92ZSIsImlkIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImNvbmNhdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGVBY2NvcmRpb24iLCJidG5FZGl0SXRlbSIsImJ0bkRlbGV0ZUl0ZW0iLCJhcHBlbmRDaGlsZCIsImNoZWNrSXRlbSIsImNsb3Nlc3QiLCJlbCIsImVkaXRJdGVtIiwiZGVsZXRlSXRlbSIsImNoZWNrSWZBbnlJdGVtTGVmdCIsImVkaXRCdG4iLCJ0YXJnZXQiLCJjaGVja0J0biIsImUiLCJjb250YWlucyIsImRlbGV0ZUJ0biIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGQiLCJlbnRlcktleUVkaXRJdGVtIiwiYWNjZXB0RWRpdGVkVGV4dCIsImJvcmRlciIsImxlbmd0aCIsImNhbmNlbEVkaXRlZFRleHQiLCJjYXRlZ29yeU9wdGlvbnMiLCJjcmVhdGVMaSIsInN0eWxlIiwiZWRpdENhdGVnb3J5IiwidGV4dCIsIm1hbmFnZUNhdGVnb3J5TGlzdCIsImNsb3Nlc3RMaSIsInRleHRWYWx1ZUxvd2VyQ2FzZSIsImZvckVhY2giLCJtYW5hZ2VDYXRlZ29yeUluZm8iLCJkZWxldGVDYXRlZ29yeSIsInRleHRQYXJhZ3JhcGgiLCJjaGVja0VkaXRDYXRlZ29yeUlucHV0IiwiZWRpdENhdGVnb3J5SW5wdXQiLCJhcnIiLCJjYXRlZ29yeVRpdGxlcyIsInRvTG93ZXJDYXNlIiwiYWNjZXB0RWRpdENhdGVnb3J5SW5wdXQiLCJpbmNsdWRlcyIsImVudGVyS2V5RWRpdENhdGVnb3J5IiwiY2xvc2VFZGl0Q2F0ZWdvcnlQb3B1cCIsImlucHV0VmFsdWVUb0xvd2VyQ2FzZSIsIml0ZW1zVGl0bGVzIiwiZXZlbnQiLCJ0ZXh0VmFsdWUiLCJ0aXRsZVRvTG93ZXIiLCJvcHRpb24iLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwicGFyYWdyYXBoVmFsdWUiLCJjbG9zZUNhdGVnb3J5UG9wdXAiLCJhbGxMaSIsInNob3dNZWNyZWF0ZUNhdGVnb3J5UG9wdXAiLCJhY2NlcHROZXdDYXRlZ29yeSIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVDYXRlZ29yeUlucHV0IiwiY2hlY2tDYXRlZ29yeUlucHV0IiwiY2F0ZWdvcnlJbnB1dFRvTG93ZXJDYXNlIiwibGkiLCJzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwIiwiZW50ZXJLZXlBZGRDYXRlZ29yeSIsImNhbmNlbE5ld0NhdGVnb3J5IiwibmV3Q2F0ZWdvcnlPcHRpb24iLCJhcHBlbmQiLCJhY2NvcmRpb25Cb3giLCJ0b2dnbGUiLCJlZGl0Q2F0ZWdvcnlBY2NlcHRCdG4iLCJrZXlDb2RlIiwiYWNjb3JkaW9uQnRuIiwiY2F0ZWdvcnlBcnJvdyIsIm5leHRFbGVtZW50U2libGluZyIsImVudGVyS2V5QWRkSXRlbSIsImNoZWNrRWRpdEl0ZW1JbnB1dCIsImVkaXRJdGVtQnRuQ2FuY2VsIl0sIm1hcHBpbmdzIjoiYUFBQSxJQTBDSUEsV0ExQ0VDLFdBQWFDLFNBQVNDLGNBQWMsaUJBQ3BDQyxVQUFZRixTQUFTQyxjQUFjLGVBRG5DRixVQUFhQyxTQUFTQyxjQUFjLGNBQ3BDQyxhQUFZRixTQUFTQyxjQUFjLG1CQUNuQ0UsVUFBWUgsU0FBU0MsY0FBYyxlQUNuQ0csa0JBQWVKLFNBQVNDLGNBQWMsd0JBRXRDSSxjQUFpQkwsU0FBR0EsY0FBU0Msb0JBRTdCSyxjQUFnQk4sU0FBU0MsY0FBYyxlQUN2Q00sZUFBZ0JQLFNBQVNDLGNBQWMsbUJBQ3ZDTyxrQkFBaUJSLFNBQVNDLGNBQWMsdUJBQ3hDUSxrQkFBb0JULFNBQVNDLGNBQWMsdUJBRzNDUyxvQkFBc0JWLFNBQVNDLGNBQWMsMEJBQzdDVSx1QkFBeUJYLFNBQVNDLGNBR3hDLGtDQUVNVyxtQkFBb0JaLFNBQVNDLGNBQWMsb0JBQzNDWSxtQkFBc0JiLFNBQUdBLGNBQVNDLHlCQUVsQ2Esa0JBQWlCZCxTQUFTQyxjQUFjLHFCQUV4Q2MsdUJBQW9CZixTQUFTQyxjQUFjLHVCQUUzQ2UsZUFBa0JoQixTQUFHQSxjQUFTQyxvQkFFOUJnQixrQkFBcUJqQixTQUFHQSxjQUFTQyx3QkFFakNpQixrQkFBc0JsQixTQUFTQyxjQUFjLHdCQUM3Q2tCLG1CQUF1Qm5CLFNBQVNDLGNBQ3JDLDRCQUVLbUIsc0JBQTBCcEIsU0FBU0MsY0FDeEMseUJBRUtvQixzQkFBMEJyQixTQUFTQyxjQUN4Qyx5QkFJR0gsb0JBQUpFLFNBQUFDLGNBQUEsMEJBRUlxQixxQkFBSnRC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bUJBQzVCdUgsRUFBYUUsbUJBRXJCM0UsVUFBVXNFLE9BQU8sUUFDOUJJLEVBQWMxRSxVQUFVc0UsT0FBTyxXQUdoQ3RILFdBQVcrQyxpQkFBaUIsUUFBU25CLFNBQ3JDekIsVUFBVTRDLGlCQUFpQixRQUFTNkUsaUJBRXBDbEgsa0JBQWtCcUMsaUJBQWlCLFFBQVM4RSxvQkFDNUNySCxjQUFjdUMsaUJBQWlCLFFBQVNvQixrQkFDeEMyRCxrQkFBa0IvRSxpQkFBaUIsUUFBU3dCLGtCQUU1Q2pFLGtCQUFrQnlDLGlCQUFpQixRQUFTaUUsMkJBQzVDbEcsdUJBQXVCaUMsaUJBQWlCLFFBQVN3RCxvQkFFakRsQixrQkFBa0J0QyxpQkFBaUIsUUFBUzRDLHNCQUM1QzRCLHNCQUFzQnhFLGlCQUFpQixRQUFTcUMsd0JBQ2hEbEUsc0JBQXNCNkIsaUJBQWlCLFFBQVM2Qyx3QkFFaEQvRSxrQkFBa0JrQyxpQkFBaUIsUUFBUzBELDJCQUM1Q3BGLHdCQUF3QjBCLGlCQUFpQixRQUFTOEQsb0JBQ2xERCxvQkFBb0I3RCxpQkFBaUIsUUFBU2tFLHFCQUM5QzNGLHdCQUF3QnlCLGlCQUFpQixRQUFTbUUiLCJmaWxlIjoidG9kby5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhZGRJdGVtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1pdGVtLWJ0bicpO1xyXG5jb25zdCB0ZXh0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC1pbnB1dCcpO1xyXG5jb25zdCBhY2NvcmRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uJyk7XHJcbmNvbnN0IGxpc3RJdGVtVGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0tdGVtcCcpO1xyXG5jb25zdCBhbGVydEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQtaW5mbycpO1xyXG5jb25zdCBtYW5hZ2VDYXRlZ29yeUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2UtY2F0ZWdvcnktYnRuJyk7XHJcblxyXG5jb25zdCBlZGl0SXRlbVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdGFzay1wb3B1cCcpO1xyXG5jb25zdCBlZGl0SXRlbUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtaW5wdXQnKTtcclxuY29uc3QgZWRpdEl0ZW1FcnJNc2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1lcnJvci1tc2cnKTtcclxuY29uc3QgZWRpdEl0ZW1CdG5BY2NlcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1idXR0b24tYWNjZXB0Jyk7XHJcbmNvbnN0IGVkaXRJdGVtQnRuQ2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtYnV0dG9uLWNhbmNlbCcpO1xyXG5cclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYW5hZ2UtY2F0ZWdvcnktcG9wdXAnKTtcclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0Jy5jYXRlZ29yaWVzLWxpc3QtaXRlbS10ZW1wbGF0ZSdcclxuKTtcclxuY29uc3QgbWFuYWdlQ2F0ZWdvcnlMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMtbGlzdCcpO1xyXG5jb25zdCBtYW5hZ2VDYXRlZ29yeUluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFuYWdlLWNhdGVnb3J5LWluZm8nKTtcclxuY29uc3QgY3JlYXRlQ2F0ZWdvcnlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWNhdGVnb3J5LWJ0bicpO1xyXG5jb25zdCBtYW5hZ2VDYXRlZ29yeUNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlLWNhdGVnb3J5LWJ0bicpO1xyXG5cclxuY29uc3QgY2F0ZWdvcnlTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktc2VsZWN0Jyk7XHJcblxyXG5jb25zdCBlZGl0Q2F0ZWdvcnlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWNhdGVnb3J5LXBvcHVwJyk7XHJcbmNvbnN0IGVkaXRDYXRlZ29yeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2F0ZWdvcnktaW5wdXQnKTtcclxuY29uc3QgZWRpdENhdGVnb3J5RXJyTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtY2F0ZWdvcnktZXJyb3ItbXNnJyk7XHJcbmNvbnN0IGVkaXRDYXRlZ29yeUFjY2VwdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWNhdGVnb3J5LWFjY2VwdCcpO1xyXG5jb25zdCBlZGl0Q2F0ZWdvcnlDYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC1jYXRlZ29yeS1jYW5jZWwnKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWNhdGVnb3J5LXBvcHVwJyk7XHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5RXJyTXNnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnLmNyZWF0ZS1jYXRlZ29yeS1lcnJvci1tc2cnXHJcbik7XHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5QnRuQWNjZXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnLmNyZWF0ZS1jYXRlZ29yeS1hY2NlcHQnXHJcbik7XHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5QnRuQ2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHQnLmNyZWF0ZS1jYXRlZ29yeS1jYW5jZWwnXHJcbik7XHJcbmNvbnN0IGNyZWF0ZUNhdGVnb3J5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3JlYXRlLWNhdGVnb3J5LWlucHV0Jyk7XHJcblxyXG5sZXQgdGV4dFRvRWRpdDtcclxuXHJcbmxldCBpdGVtSWROdW1iZXIgPSAwO1xyXG5cclxuY29uc3QgYWRkSXRlbSA9ICgpID0+IHtcclxuXHRsZXQgbGlzdEl0ZW0gPSBsaXN0SXRlbVRlbXAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG5cdGlmICh0ZXh0SW5wdXQudmFsdWUgIT09ICcnKSB7XHJcblx0XHRjb25zdCBjYXRlZ29yeVZhbHVlID0gY2F0ZWdvcnlTZWxlY3QudmFsdWU7XHJcblx0XHRjb25zdCBjYXRlZ29yeVRpdGxlVXBwZXJDYXNlID1cclxuXHRcdFx0Y2F0ZWdvcnlWYWx1ZVswXS50b1VwcGVyQ2FzZSgpICsgY2F0ZWdvcnlWYWx1ZS5zbGljZSgxKTtcclxuXHJcblx0XHRsZXQgYWNjQm94ID0gYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3IoYCMke2NhdGVnb3J5VmFsdWV9YCk7XHJcblxyXG5cdFx0aXRlbUlkTnVtYmVyKys7XHJcblx0XHRhbGVydEluZm8udGV4dENvbnRlbnQgPSAnJztcclxuXHJcblx0XHRpZiAoYWNjQm94KSB7XHJcblx0XHRcdGlmIChhY2NCb3guaWQgPT0gY2F0ZWdvcnlWYWx1ZSkge1xyXG5cdFx0XHRcdGxldCBhY2NMaXN0ID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5hY2MtbGlzdCcpO1xyXG5cdFx0XHRcdGxldCBpdGVtID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLmxpc3QtaXRlbScpO1xyXG5cdFx0XHRcdGxldCB0ZXh0Q29udGVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnRleHQtY29udGVudCcpO1xyXG5cdFx0XHRcdGxldCBhY2NCdG4gPSBhY2NMaXN0LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XHJcblx0XHRcdFx0bGV0IGFjY051bWJlciA9IGFjY0J0bi5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcdFx0Jy5jYXRlZ29yeS10b2RvLW51bWJlcidcclxuXHRcdFx0XHQpLnRleHRDb250ZW50O1xyXG5cdFx0XHRcdGFjY051bWJlcisrO1xyXG5cclxuXHRcdFx0XHRhY2NCdG4ucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tbnVtYmVyJykudGV4dENvbnRlbnQgPSBhY2NOdW1iZXI7XHJcblxyXG5cdFx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCdpZCcsIGBpdGVtLSR7aXRlbUlkTnVtYmVyfWApO1xyXG5cdFx0XHRcdHRleHRDb250ZW50LnRleHRDb250ZW50ID0gdGV4dElucHV0LnZhbHVlO1xyXG5cclxuXHRcdFx0XHR0ZXh0SW5wdXQudmFsdWUgPSAnJztcclxuXHJcblx0XHRcdFx0YWRkQnRuc0FuZExpc3RlbmVycyhpdGVtKTtcclxuXHJcblx0XHRcdFx0YWNjTGlzdC5hcHBlbmRDaGlsZChpdGVtKTtcclxuXHRcdFx0XHRhY2NMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuXHRcdFx0XHRhY2NMaXN0LnByZXZpb3VzRWxlbWVudFNpYmxpbmdcclxuXHRcdFx0XHRcdC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktYXJyb3cnKVxyXG5cdFx0XHRcdFx0LmNsYXNzTGlzdC5yZW1vdmUoJ3JvdGF0ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRsZXQgYWNjQm94ID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLmFjYy1ib3gnKTtcclxuXHRcdFx0YWNjQm94LnNldEF0dHJpYnV0ZSgnaWQnLCBgJHtjYXRlZ29yeVZhbHVlfWApO1xyXG5cdFx0XHRsZXQgYWNjb3JkaW9uQnV0dG9uID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLXRpdGxlLWJ0bicpO1xyXG5cdFx0XHRsZXQgdGl0bGUgPSBhY2NCb3gucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tdGV4dCcpO1xyXG5cdFx0XHRsZXQgbnVtYmVyID0gYWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLW51bWJlcicpO1xyXG5cdFx0XHRsZXQgaXRlbSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5saXN0LWl0ZW0nKTtcclxuXHRcdFx0bGV0IHRleHRDb250ZW50ID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcudGV4dC1jb250ZW50Jyk7XHJcblxyXG5cdFx0XHRhY2NvcmRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVBY2NvcmRpb24pO1xyXG5cdFx0XHR0aXRsZS50ZXh0Q29udGVudCA9IGNhdGVnb3J5VGl0bGVVcHBlckNhc2U7XHJcblx0XHRcdG51bWJlci50ZXh0Q29udGVudCA9ICcxJztcclxuXHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoJ2lkJywgYGl0ZW0tJHtpdGVtSWROdW1iZXJ9YCk7XHJcblx0XHRcdHRleHRDb250ZW50LnRleHRDb250ZW50ID0gdGV4dElucHV0LnZhbHVlO1xyXG5cclxuXHRcdFx0dGV4dElucHV0LnZhbHVlID0gJyc7XHJcblxyXG5cdFx0XHRhZGRCdG5zQW5kTGlzdGVuZXJzKGl0ZW0pO1xyXG5cclxuXHRcdFx0YWNjb3JkaW9uLmFwcGVuZENoaWxkKGFjY0JveCk7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdGFsZXJ0SW5mby50ZXh0Q29udGVudCA9ICdXcml0ZSBzb21ldGhpbmcgdG8gZG8hJztcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBhZGRCdG5zQW5kTGlzdGVuZXJzID0gZWwgPT4ge1xyXG5cdGxldCBidG5DaGVja0l0ZW0gPSBlbC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWNoZWNrJyk7XHJcblx0bGV0IGJ0bkVkaXRJdGVtID0gZWwucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1lZGl0Jyk7XHJcblx0bGV0IGJ0bkRlbGV0ZUl0ZW0gPSBlbC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWRlbGV0ZScpO1xyXG5cclxuXHRidG5DaGVja0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja0l0ZW0pO1xyXG5cdGJ0bkVkaXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdEl0ZW0pO1xyXG5cdGJ0bkRlbGV0ZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkZWxldGVJdGVtKTtcclxuXHRidG5EZWxldGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tJZkFueUl0ZW1MZWZ0KTtcclxufTtcclxuXHJcbmNvbnN0IGVudGVyS2V5QWRkSXRlbSA9ICgpID0+IHtcclxuXHRpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuXHRcdGFkZEl0ZW0oKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0l0ZW0gPSBlID0+IHtcclxuXHRsZXQgY2hlY2tCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuYnV0dG9uLWNoZWNrJyk7XHJcblx0bGV0IGVkaXRCdG4gPSBjaGVja0J0bi5uZXh0RWxlbWVudFNpYmxpbmc7XHJcblx0bGV0IGxpc3RJdGVtID0gY2hlY2tCdG4uY2xvc2VzdCgnLmxpc3QtaXRlbScpO1xyXG5cdGxldCBhY2NCb3ggPSBlLnRhcmdldC5jbG9zZXN0KCcuYWNjLWJveCcpO1xyXG5cdGxldCBudW1iZXIgPSBhY2NCb3gucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tbnVtYmVyJykudGV4dENvbnRlbnQ7XHJcblxyXG5cdGlmICghbGlzdEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKSkge1xyXG5cdFx0ZWRpdEJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHRsaXN0SXRlbS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcclxuXHRcdG51bWJlci0tO1xyXG5cdFx0YWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLW51bWJlcicpLnRleHRDb250ZW50ID0gbnVtYmVyO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRlZGl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRsaXN0SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcclxuXHRcdG51bWJlcisrO1xyXG5cdFx0YWNjQm94LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yeS10b2RvLW51bWJlcicpLnRleHRDb250ZW50ID0gbnVtYmVyO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGVkaXRJdGVtID0gZSA9PiB7XHJcblx0bGV0IGVkaXRCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuYnV0dG9uLWVkaXQnKTtcclxuXHRsZXQgbGlzdEl0ZW0gPSBlZGl0QnRuLmNsb3Nlc3QoJy5saXN0LWl0ZW0nKTtcclxuXHR0ZXh0VG9FZGl0ID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLnRleHQtY29udGVudCcpO1xyXG5cdGVkaXRJdGVtUG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpO1xyXG5cdGVkaXRJdGVtSW5wdXQudmFsdWUgPSB0ZXh0VG9FZGl0LnRleHRDb250ZW50O1xyXG59O1xyXG5cclxuY29uc3QgZGVsZXRlSXRlbSA9IGUgPT4ge1xyXG5cdGxldCBhY2NCb3ggPSBlLnRhcmdldC5jbG9zZXN0KCcuYWNjLWJveCcpO1xyXG5cdGxldCBkZWxldGVCdG4gPSBlLnRhcmdldC5jbG9zZXN0KCcuYnV0dG9uLWRlbGV0ZScpO1xyXG5cdGxldCBudW1iZXIgPSBhY2NCb3gucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LXRvZG8tbnVtYmVyJykudGV4dENvbnRlbnQ7XHJcblxyXG5cdGlmIChkZWxldGVCdG4uY2xvc2VzdCgnLmxpc3QtaXRlbScpLmNsYXNzTGlzdC5jb250YWlucygnY29tcGxldGVkJykpIHtcclxuXHRcdGRlbGV0ZUJ0bi5jbG9zZXN0KCcubGlzdC1pdGVtJykucmVtb3ZlKCk7XHJcblx0XHRlZGl0SXRlbUlucHV0LnZhbHVlID0gJyc7XHJcblx0fSBlbHNlIHtcclxuXHRcdGRlbGV0ZUJ0bi5jbG9zZXN0KCcubGlzdC1pdGVtJykucmVtb3ZlKCk7XHJcblx0XHRlZGl0SXRlbUlucHV0LnZhbHVlID0gJyc7XHJcblx0XHRudW1iZXItLTtcclxuXHRcdGFjY0JveC5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktdG9kby1udW1iZXInKS50ZXh0Q29udGVudCA9IG51bWJlcjtcclxuXHR9XHJcblxyXG5cdGlmIChhY2NCb3gucXVlcnlTZWxlY3RvckFsbCgnLmxpc3QtaXRlbScpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0YWNjQm94LnJlbW92ZSgpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGFjY2VwdEVkaXRlZFRleHQgPSAoKSA9PiB7XHJcblx0dGV4dFRvRWRpdC50ZXh0Q29udGVudCA9IGVkaXRJdGVtSW5wdXQudmFsdWU7XHJcblx0ZWRpdEl0ZW1Qb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0dGV4dFRvRWRpdC50ZXh0Q29udGVudCA9IGVkaXRJdGVtSW5wdXQudmFsdWU7XHJcblx0ZWRpdEl0ZW1FcnJNc2cudGV4dENvbnRlbnQgPSAnJztcclxuXHRlZGl0SXRlbUlucHV0LnN0eWxlLmJvcmRlciA9ICdub25lJztcclxufTtcclxuXHJcbmNvbnN0IGVudGVyS2V5RWRpdEl0ZW0gPSAoKSA9PiB7XHJcblx0aWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcblx0XHRhY2NlcHRFZGl0ZWRUZXh0KCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tFZGl0SXRlbUlucHV0ID0gKCkgPT4ge1xyXG5cdGlmICh0ZXh0VG9FZGl0LnRleHRDb250ZW50ID09PSBlZGl0SXRlbUlucHV0LnZhbHVlKSB7XHJcblx0XHRlZGl0SXRlbUlucHV0LnN0eWxlLmJvcmRlciA9ICcycHggc29saWQgcmVkJztcclxuXHRcdGVkaXRJdGVtRXJyTXNnLnRleHRDb250ZW50ID0gJ1BsZWFzZSwgY2hhbmdlIHNvbWV0aGluZyEnO1xyXG5cdH0gZWxzZSBpZiAoZWRpdEl0ZW1JbnB1dC52YWx1ZSA9PT0gJycpIHtcclxuXHRcdGVkaXRJdGVtSW5wdXQuc3R5bGUuYm9yZGVyID0gJzJweCBzb2xpZCByZWQnO1xyXG5cdFx0ZWRpdEl0ZW1FcnJNc2cudGV4dENvbnRlbnQgPSAnUGxlYXNlLCB3cml0ZSBzb21ldGhpbmchJztcclxuXHR9IGVsc2Uge1xyXG5cdFx0YWNjZXB0RWRpdGVkVGV4dCgpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNhbmNlbEVkaXRlZFRleHQgPSAoKSA9PiB7XHJcblx0ZWRpdEl0ZW1Qb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0ZWRpdEl0ZW1JbnB1dC52YWx1ZSA9ICcnO1xyXG5cdGVkaXRJdGVtRXJyTXNnLnRleHRDb250ZW50ID0gJyc7XHJcblx0ZWRpdEl0ZW1JbnB1dC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XHJcbn07XHJcblxyXG5jb25zdCBzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwID0gKCkgPT4ge1xyXG5cdGxldCBjYXRlZ29yeU9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcnktb3B0aW9uJyk7XHJcblxyXG5cdGNhdGVnb3J5T3B0aW9ucy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG5cdFx0Y3JlYXRlTGkoaXRlbSk7XHJcblx0fSk7XHJcblxyXG5cdG1hbmFnZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlTGkgPSBlbCA9PiB7XHJcblx0Y29uc3QgdGVtcGxhdGUgPSBtYW5hZ2VDYXRlZ29yeVRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG5cdGNvbnN0IG5ld0xpID0gdGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMtbGlzdC1pdGVtJyk7XHJcblx0Y29uc3QgdGV4dFBhcmFncmFwaCA9IG5ld0xpLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbS10ZXh0Jyk7XHJcblx0Y29uc3QgdGV4dCA9IGVsLnRleHRDb250ZW50O1xyXG5cclxuXHRjb25zdCBlZGl0QnRuID0gbmV3TGkucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LWVkaXQtYnV0dG9uJyk7XHJcblx0Y29uc3QgZGVsZXRlQnRuID0gbmV3TGkucXVlcnlTZWxlY3RvcignLmNhdGVnb3J5LWRlbGV0ZS1idXR0b24nKTtcclxuXHJcblx0ZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVkaXRDYXRlZ29yeSk7XHJcblx0ZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlQ2F0ZWdvcnkpO1xyXG5cclxuXHR0ZXh0UGFyYWdyYXBoLnRleHRDb250ZW50ID0gdGV4dDtcclxuXHRtYW5hZ2VDYXRlZ29yeUxpc3QuYXBwZW5kQ2hpbGQobmV3TGkpO1xyXG59O1xyXG5cclxuY29uc3QgZWRpdENhdGVnb3J5ID0gZSA9PiB7XHJcblx0Y29uc3QgYnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmNhdGVnb3J5LWVkaXQtYnV0dG9uJyk7XHJcblx0Y29uc3QgY2xvc2VzdExpID0gYnRuLmNsb3Nlc3QoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbScpO1xyXG5cdHRleHRUb0VkaXQgPSBjbG9zZXN0TGkucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMtbGlzdC1pdGVtLXRleHQnKTtcclxuXHRjb25zdCB0ZXh0VmFsdWVMb3dlckNhc2UgPSB0ZXh0VG9FZGl0LnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdGxldCBjYXRlZ29yeVRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yeS10b2RvLXRleHQnKTtcclxuXHRsZXQgYXJyID0gW107XHJcblxyXG5cdGNhdGVnb3J5VGl0bGVzLmZvckVhY2godGl0bGUgPT4ge1xyXG5cdFx0YXJyLnB1c2godGl0bGUudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKSk7XHJcblx0fSk7XHJcblxyXG5cdGlmIChhcnIuaW5jbHVkZXModGV4dFZhbHVlTG93ZXJDYXNlKSkge1xyXG5cdFx0bWFuYWdlQ2F0ZWdvcnlJbmZvLnRleHRDb250ZW50ID0gJ1lvdSBhcmUgdXNpbmcgdGhpcyBvbmUhJztcclxuXHRcdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlID0gdGV4dFRvRWRpdC50ZXh0Q29udGVudDtcclxuXHJcblx0XHRlZGl0Q2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0XHRtYW5hZ2VDYXRlZ29yeVBvcHVwLmNsb3Nlc3QoJy5wb3B1cCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXktYmxvY2snKTtcclxuXHRcdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgY2hlY2tFZGl0Q2F0ZWdvcnlJbnB1dCA9ICgpID0+IHtcclxuXHRsZXQgaW5wdXRWYWx1ZSA9IGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlO1xyXG5cdGxldCBpbnB1dFZhbHVlVG9Mb3dlckNhc2UgPSBpbnB1dFZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcblx0bGV0IGNhdGVnb3J5VGl0bGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3JpZXMtbGlzdC1pdGVtLXRleHQnKTtcclxuXHRsZXQgYXJyID0gW107XHJcblxyXG5cdGNhdGVnb3J5VGl0bGVzLmZvckVhY2godGl0bGUgPT4ge1xyXG5cdFx0YXJyLnB1c2godGl0bGUudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKSk7XHJcblx0fSk7XHJcblxyXG5cdGlmIChpbnB1dFZhbHVlID09PSAnJykge1xyXG5cdFx0ZWRpdENhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJ1BsZWFzZSwgd3JpdGUgc29tZXRoaW5nISc7XHJcblx0fSBlbHNlIGlmIChhcnIuaW5jbHVkZXMoaW5wdXRWYWx1ZVRvTG93ZXJDYXNlKSkge1xyXG5cdFx0ZWRpdENhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJ1BsZWFzZSwgd3JpdGUgbmV3IGNhdGVnb3J5ISc7XHJcblx0fSBlbHNlIHtcclxuXHRcdGFjY2VwdEVkaXRDYXRlZ29yeUlucHV0KCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgZW50ZXJLZXlFZGl0Q2F0ZWdvcnkgPSAoKSA9PiB7XHJcblx0aWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcblx0XHRjaGVja0VkaXRDYXRlZ29yeUlucHV0KCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgYWNjZXB0RWRpdENhdGVnb3J5SW5wdXQgPSAoKSA9PiB7XHJcblx0bGV0IHRleHRWYWx1ZSA9IHRleHRUb0VkaXQudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0bGV0IG9wdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5jYXRlZ29yeS1vcHRpb25bdmFsdWUgPSAke3RleHRWYWx1ZX1dYCk7XHJcblxyXG5cdG9wdGlvbi52YWx1ZSA9IGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcblx0b3B0aW9uLnRleHRDb250ZW50ID1cclxuXHRcdGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcclxuXHRcdGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLnNsaWNlKDEpO1xyXG5cclxuXHR0ZXh0VG9FZGl0LnRleHRDb250ZW50ID1cclxuXHRcdGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcclxuXHRcdGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlLnNsaWNlKDEpO1xyXG5cdGVkaXRDYXRlZ29yeUlucHV0LnZhbHVlID0gJyc7XHJcblx0ZWRpdENhdGVnb3J5RXJyTXNnLnRleHRDb250ZW50ID0gJyc7XHJcblx0ZWRpdENhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpO1xyXG5cdG1hbmFnZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VFZGl0Q2F0ZWdvcnlQb3B1cCA9ICgpID0+IHtcclxuXHRlZGl0Q2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0bWFuYWdlQ2F0ZWdvcnlQb3B1cC5jbG9zZXN0KCcucG9wdXAnKS5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0ZWRpdENhdGVnb3J5SW5wdXQudmFsdWUgPSAnJztcclxuXHRlZGl0Q2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnJztcclxufTtcclxuXHJcbmNvbnN0IGRlbGV0ZUNhdGVnb3J5ID0gZSA9PiB7XHJcblx0Y29uc3QgZGVsZXRlQnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmNhdGVnb3J5LWRlbGV0ZS1idXR0b24nKTtcclxuXHRjb25zdCBjbG9zZXN0TGkgPSBkZWxldGVCdG4uY2xvc2VzdCgnLmNhdGVnb3JpZXMtbGlzdC1pdGVtJyk7XHJcblx0Y29uc3QgcGFyYWdyYXBoID0gY2xvc2VzdExpLnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbS10ZXh0Jyk7XHJcblx0Y29uc3QgcGFyYWdyYXBoVmFsdWUgPSBwYXJhZ3JhcGgudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0Y29uc3QgaXRlbXNUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcnktdG9kby10ZXh0Jyk7XHJcblxyXG5cdGxldCBjYXRlZ29yeU9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcnktb3B0aW9uJyk7XHJcblx0bGV0IGFyciA9IFtdO1xyXG5cclxuXHRpZiAoaXRlbXNUaXRsZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0aXRlbXNUaXRsZXMuZm9yRWFjaCh0aXRsZSA9PiB7XHJcblx0XHRcdGNvbnN0IHRpdGxlVG9Mb3dlciA9IHRpdGxlLnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGFyci5wdXNoKHRpdGxlVG9Mb3dlcik7XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoYXJyLmluY2x1ZGVzKHBhcmFncmFwaFZhbHVlKSkge1xyXG5cdFx0XHRtYW5hZ2VDYXRlZ29yeUluZm8udGV4dENvbnRlbnQgPSAnWW91IGFyZSB1c2luZyB0aGlzIGNhdGVnb3J5ISc7XHJcblx0XHRcdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjYXRlZ29yeU9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xyXG5cdFx0XHRcdGlmIChjYXRlZ29yeU9wdGlvbnMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRcdFx0aWYgKG9wdGlvbi52YWx1ZSA9PT0gcGFyYWdyYXBoVmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0Y2xvc2VzdExpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRvcHRpb24ucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdG1hbmFnZUNhdGVnb3J5SW5mby50ZXh0Q29udGVudCA9ICdZb3UgbmVlZCBhdCBsZWFzdCBvbmUgY2F0ZWdvcnkhJztcclxuXHRcdFx0XHRcdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QuYWRkKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0Y2F0ZWdvcnlPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuXHRcdFx0aWYgKGNhdGVnb3J5T3B0aW9ucy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0aWYgKG9wdGlvbi52YWx1ZSA9PT0gcGFyYWdyYXBoVmFsdWUpIHtcclxuXHRcdFx0XHRcdGNsb3Nlc3RMaS5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdG9wdGlvbi5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG1hbmFnZUNhdGVnb3J5SW5mby50ZXh0Q29udGVudCA9ICdZb3UgbmVlZCBhdCBsZWFzdCBvbmUgY2F0ZWdvcnkhJztcclxuXHRcdFx0XHRtYW5hZ2VDYXRlZ29yeUluZm8uY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZUNhdGVnb3J5UG9wdXAgPSAoKSA9PiB7XHJcblx0aWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yaWVzLWxpc3QtaXRlbScpKSB7XHJcblx0XHRsZXQgYWxsTGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllcy1saXN0LWl0ZW0nKTtcclxuXHJcblx0XHRhbGxMaS5mb3JFYWNoKGxpID0+IHtcclxuXHRcdFx0bGkucmVtb3ZlKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG1hbmFnZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpO1xyXG5cdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcbn07XHJcblxyXG5jb25zdCBzaG93TWVjcmVhdGVDYXRlZ29yeVBvcHVwID0gKCkgPT4ge1xyXG5cdGNyZWF0ZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LmFkZCgnZGlzcGxheS1ibG9jaycpO1xyXG5cdG1hbmFnZUNhdGVnb3J5SW5mby5jbGFzc0xpc3QucmVtb3ZlKCdkaXNwbGF5LWJsb2NrJyk7XHJcblx0Y2xvc2VDYXRlZ29yeVBvcHVwKCk7XHJcbn07XHJcblxyXG5jb25zdCBhY2NlcHROZXdDYXRlZ29yeSA9ICgpID0+IHtcclxuXHRsZXQgbmV3Q2F0ZWdvcnlPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuXHRuZXdDYXRlZ29yeU9wdGlvbi52YWx1ZSA9IGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuXHRuZXdDYXRlZ29yeU9wdGlvbi50ZXh0Q29udGVudCA9XHJcblx0XHRjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcclxuXHRcdGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUuc2xpY2UoMSk7XHJcblx0bmV3Q2F0ZWdvcnlPcHRpb24uY2xhc3NMaXN0LmFkZCgnY2F0ZWdvcnktb3B0aW9uJyk7XHJcblxyXG5cdGNhdGVnb3J5U2VsZWN0LmFwcGVuZChuZXdDYXRlZ29yeU9wdGlvbik7XHJcblxyXG5cdGNyZWF0ZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpO1xyXG5cdGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUgPSAnJztcclxuXHRjcmVhdGVDYXRlZ29yeUVyck1zZy50ZXh0Q29udGVudCA9ICcnO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tDYXRlZ29yeUlucHV0ID0gKCkgPT4ge1xyXG5cdGxldCBjYXRlZ29yeUlucHV0VmFsdWUgPSBjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlO1xyXG5cdGxldCBjYXRlZ29yeUlucHV0VG9Mb3dlckNhc2UgPSBjYXRlZ29yeUlucHV0VmFsdWUudG9Mb3dlckNhc2UoKTtcclxuXHRsZXQgY2F0ZWdvcnlPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3J5LW9wdGlvbicpO1xyXG5cdGxldCBhcnIgPSBbXTtcclxuXHJcblx0Y2F0ZWdvcnlPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcclxuXHRcdGFyci5wdXNoKG9wdGlvbi52YWx1ZSk7XHJcblx0fSk7XHJcblxyXG5cdGlmIChjcmVhdGVDYXRlZ29yeUlucHV0LnZhbHVlID09PSAnJykge1xyXG5cdFx0Y3JlYXRlQ2F0ZWdvcnlFcnJNc2cudGV4dENvbnRlbnQgPSAnUGxlYXNlLCB3cml0ZSBzb21ldGhpbmchJztcclxuXHR9IGVsc2UgaWYgKGFyci5pbmNsdWRlcyhjYXRlZ29yeUlucHV0VG9Mb3dlckNhc2UpKSB7XHJcblx0XHRjcmVhdGVDYXRlZ29yeUVyck1zZy50ZXh0Q29udGVudCA9ICdZb3UgYWxyZWFkeSBoYXZlIHRoaXMgb25lISc7XHJcblx0fSBlbHNlIHtcclxuXHRcdGFjY2VwdE5ld0NhdGVnb3J5KCk7XHJcblx0XHRzaG93TWVNYW5hZ2VDYXRlZ29yeVBvcHVwKCk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgZW50ZXJLZXlBZGRDYXRlZ29yeSA9ICgpID0+IHtcclxuXHRpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuXHRcdGNoZWNrQ2F0ZWdvcnlJbnB1dCgpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNhbmNlbE5ld0NhdGVnb3J5ID0gKCkgPT4ge1xyXG5cdGNyZWF0ZUNhdGVnb3J5UG9wdXAuY2xvc2VzdCgnLnBvcHVwJykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheS1ibG9jaycpO1xyXG5cdGNyZWF0ZUNhdGVnb3J5SW5wdXQudmFsdWUgPSAnJztcclxuXHRjcmVhdGVDYXRlZ29yeUVyck1zZy50ZXh0Q29udGVudCA9ICcnO1xyXG5cdHNob3dNZU1hbmFnZUNhdGVnb3J5UG9wdXAoKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrSWZBbnlJdGVtTGVmdCA9ICgpID0+IHtcclxuXHRpZiAoYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3IoJy5hY2MtYm94JykpIHtcclxuXHRcdGFsZXJ0SW5mby50ZXh0Q29udGVudCA9ICcnO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRhbGVydEluZm8udGV4dENvbnRlbnQgPSAnRm9yIG5vdyB0aGVyZSBpcyBub3RoaW5nIHRvIGRvLic7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlQWNjb3JkaW9uID0gZSA9PiB7XHJcblx0Y29uc3QgYWNjb3JkaW9uQnRuID0gZS50YXJnZXQuY2xvc2VzdCgnLmNhdGVnb3J5LXRvZG8tdGl0bGUtYnRuJyk7XHJcblx0Y29uc3QgY2F0ZWdvcnlBcnJvdyA9IGFjY29yZGlvbkJ0bi5xdWVyeVNlbGVjdG9yKCcuY2F0ZWdvcnktYXJyb3cnKTtcclxuXHRjb25zdCBhY2NvcmRpb25Cb3ggPSBhY2NvcmRpb25CdG4ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuXHRhY2NvcmRpb25Cb3guY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZScpO1xyXG5cdGNhdGVnb3J5QXJyb3cuY2xhc3NMaXN0LnRvZ2dsZSgncm90YXRlJyk7XHJcbn07XHJcblxyXG5hZGRJdGVtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkSXRlbSk7XHJcbnRleHRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGVudGVyS2V5QWRkSXRlbSk7XHJcblxyXG5lZGl0SXRlbUJ0bkFjY2VwdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrRWRpdEl0ZW1JbnB1dCk7XHJcbmVkaXRJdGVtSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlbnRlcktleUVkaXRJdGVtKTtcclxuZWRpdEl0ZW1CdG5DYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYW5jZWxFZGl0ZWRUZXh0KTtcclxuXHJcbm1hbmFnZUNhdGVnb3J5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd01lTWFuYWdlQ2F0ZWdvcnlQb3B1cCk7XHJcbm1hbmFnZUNhdGVnb3J5Q2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUNhdGVnb3J5UG9wdXApO1xyXG5cclxuZWRpdENhdGVnb3J5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlbnRlcktleUVkaXRDYXRlZ29yeSk7XHJcbmVkaXRDYXRlZ29yeUFjY2VwdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoZWNrRWRpdENhdGVnb3J5SW5wdXQpO1xyXG5lZGl0Q2F0ZWdvcnlDYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUVkaXRDYXRlZ29yeVBvcHVwKTtcclxuXHJcbmNyZWF0ZUNhdGVnb3J5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd01lY3JlYXRlQ2F0ZWdvcnlQb3B1cCk7XHJcbmNyZWF0ZUNhdGVnb3J5QnRuQWNjZXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tDYXRlZ29yeUlucHV0KTtcclxuY3JlYXRlQ2F0ZWdvcnlJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGVudGVyS2V5QWRkQ2F0ZWdvcnkpO1xyXG5jcmVhdGVDYXRlZ29yeUJ0bkNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbmNlbE5ld0NhdGVnb3J5KTtcclxuIl19
